!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Handlebars=t():e.Handlebars=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(){var e=new l.HandlebarsEnvironment;return p.extend(e,l),e.SafeString=u["default"],e.Exception=d["default"],e.Utils=p,e.escapeExpression=p.escapeExpression,e.VM=m,e.template=function(t){return m.template(t,e)},e}var r=n(1)["default"],i=n(2)["default"];t.__esModule=!0;var o=n(3),l=r(o),s=n(17),u=i(s),c=n(5),d=i(c),f=n(4),p=r(f),h=n(18),m=r(h),g=n(19),v=i(g),b=a();b.create=a,v["default"](b),b["default"]=b,t["default"]=b,e.exports=t["default"]},function(e,t){"use strict";t["default"]=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t},t.__esModule=!0},function(e,t){"use strict";t["default"]=function(e){return e&&e.__esModule?e:{"default":e}},t.__esModule=!0},function(e,t,n){"use strict";function a(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},s.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}var r=n(2)["default"];t.__esModule=!0,t.HandlebarsEnvironment=a;var i=n(4),o=n(5),l=r(o),s=n(6),u=n(14),c=n(16),d=r(c),f="4.0.5";t.VERSION=f;var p=7;t.COMPILER_REVISION=p;var h={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=h;var m="[object Object]";a.prototype={constructor:a,logger:d["default"],log:d["default"].log,registerHelper:function(e,t){if(i.toString.call(e)===m){if(t)throw new l["default"]("Arg not supported with multiple helpers");i.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(i.toString.call(e)===m)i.extend(this.partials,e);else{if("undefined"==typeof t)throw new l["default"]('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(i.toString.call(e)===m){if(t)throw new l["default"]("Arg not supported with multiple decorators");i.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var g=d["default"].log;t.log=g,t.createFrame=i.createFrame,t.logger=d["default"]},function(e,t){"use strict";function n(e){return c[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function r(e,t){for(var n=0,a=e.length;a>n;n++)if(e[n]===t)return n;return-1}function i(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return f.test(e)?e.replace(d,n):e}function o(e){return e||0===e?!(!m(e)||0!==e.length):!0}function l(e){var t=a({},e);return t._parent=e,t}function s(e,t){return e.path=t,e}function u(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=a,t.indexOf=r,t.escapeExpression=i,t.isEmpty=o,t.createFrame=l,t.blockParams=s,t.appendContextPath=u;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},d=/[&<>"'`=]/g,f=/[&<>"'`=]/,p=Object.prototype.toString;t.toString=p;var h=function(e){return"function"==typeof e};h(/x/)&&(t.isFunction=h=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)}),t.isFunction=h;var m=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===p.call(e):!1};t.isArray=m},function(e,t){"use strict";function n(e,t){var r=t&&t.loc,i=void 0,o=void 0;r&&(i=r.start.line,o=r.start.column,e+=" - "+i+":"+o);for(var l=Error.prototype.constructor.call(this,e),s=0;s<a.length;s++)this[a[s]]=l[a[s]];Error.captureStackTrace&&Error.captureStackTrace(this,n),r&&(this.lineNumber=i,this.column=o)}t.__esModule=!0;var a=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){o["default"](e),s["default"](e),c["default"](e),f["default"](e),h["default"](e),g["default"](e),b["default"](e)}var r=n(2)["default"];t.__esModule=!0,t.registerDefaultHelpers=a;var i=n(7),o=r(i),l=n(8),s=r(l),u=n(9),c=r(u),d=n(10),f=r(d),p=n(11),h=r(p),m=n(12),g=r(m),v=n(13),b=r(v)},function(e,t,n){"use strict";t.__esModule=!0;var a=n(4);t["default"]=function(e){e.registerHelper("blockHelperMissing",function(t,n){var r=n.inverse,i=n.fn;if(t===!0)return i(this);if(t===!1||null==t)return r(this);if(a.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var o=a.createFrame(n.data);o.contextPath=a.appendContextPath(n.data.contextPath,n.name),n={data:o}}return i(t,n)})},e.exports=t["default"]},function(e,t,n){"use strict";var a=n(2)["default"];t.__esModule=!0;var r=n(4),i=n(5),o=a(i);t["default"]=function(e){e.registerHelper("each",function(e,t){function n(t,n,i){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!i,c&&(u.contextPath=c+t)),s+=a(e[t],{data:u,blockParams:r.blockParams([e[t],t],[c+t,null])})}if(!t)throw new o["default"]("Must pass iterator to #each");var a=t.fn,i=t.inverse,l=0,s="",u=void 0,c=void 0;if(t.data&&t.ids&&(c=r.appendContextPath(t.data.contextPath,t.ids[0])+"."),r.isFunction(e)&&(e=e.call(this)),t.data&&(u=r.createFrame(t.data)),e&&"object"==typeof e)if(r.isArray(e))for(var d=e.length;d>l;l++)l in e&&n(l,l,l===e.length-1);else{var f=void 0;for(var p in e)e.hasOwnProperty(p)&&(void 0!==f&&n(f,l-1),f=p,l++);void 0!==f&&n(f,l-1,!0)}return 0===l&&(s=i(this)),s})},e.exports=t["default"]},function(e,t,n){"use strict";var a=n(2)["default"];t.__esModule=!0;var r=n(5),i=a(r);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new i["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var a=n(4);t["default"]=function(e){e.registerHelper("if",function(e,t){return a.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],a=0;a<arguments.length-1;a++)t.push(arguments[a]);var r=1;null!=n.hash.level?r=n.hash.level:n.data&&null!=n.data.level&&(r=n.data.level),t[0]=r,e.log.apply(e,t)})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var a=n(4);t["default"]=function(e){e.registerHelper("with",function(e,t){a.isFunction(e)&&(e=e.call(this));var n=t.fn;if(a.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&(r=a.createFrame(t.data),r.contextPath=a.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:a.blockParams([e],[r&&r.contextPath])})})},e.exports=t["default"]},function(e,t,n){"use strict";function a(e){o["default"](e)}var r=n(2)["default"];t.__esModule=!0,t.registerDefaultDecorators=a;var i=n(15),o=r(i)},function(e,t,n){"use strict";t.__esModule=!0;var a=n(4);t["default"]=function(e){e.registerDecorator("inline",function(e,t,n,r){var i=e;return t.partials||(t.partials={},i=function(r,i){var o=n.partials;n.partials=a.extend({},o,t.partials);var l=e(r,i);return n.partials=o,l}),t.partials[r.args[0]]=r.fn,i})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var a=n(4),r={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=a.indexOf(r.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=r.lookupLevel(e),"undefined"!=typeof console&&r.lookupLevel(r.level)<=e){var t=r.methodMap[e];console[t]||(t="log");for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;n>i;i++)a[i-1]=arguments[i];console[t].apply(console,a)}}};t["default"]=r,e.exports=t["default"]},function(e,t){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function a(e){var t=e&&e[0]||1,n=v.COMPILER_REVISION;if(t!==n){if(n>t){var a=v.REVISION_CHANGES[n],r=v.REVISION_CHANGES[t];throw new g["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+r+").")}throw new g["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){function n(n,a,r){r.hash&&(a=h.extend({},a,r.hash),r.ids&&(r.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,a,r);var i=t.VM.invokePartial.call(this,n,a,r);if(null==i&&t.compile&&(r.partials[r.name]=t.compile(n,e.compilerOptions,t),i=r.partials[r.name](a,r)),null!=i){if(r.indent){for(var o=i.split("\n"),l=0,s=o.length;s>l&&(o[l]||l+1!==s);l++)o[l]=r.indent+o[l];i=o.join("\n")}return i}throw new g["default"]("The partial "+r.name+" could not be compiled when running in runtime-only mode")}function a(t){function n(t){return""+e.main(r,t,r.helpers,r.partials,o,s,l)}var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=i.data;a._setup(i),!i.partial&&e.useData&&(o=u(t,o));var l=void 0,s=e.useBlockParams?[]:void 0;return e.useDepths&&(l=i.depths?t!==i.depths[0]?[t].concat(i.depths):i.depths:[t]),(n=c(e.main,n,r,i.depths||[],o,s))(t,i)}if(!t)throw new g["default"]("No environment passed to template");if(!e||!e.main)throw new g["default"]("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var r={strict:function(e,t){if(!(t in e))throw new g["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,a=0;n>a;a++)if(e[a]&&null!=e[a][t])return e[a][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:h.escapeExpression,invokePartial:n,fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,a,r){var o=this.programs[e],l=this.fn(e);return t||r||a||n?o=i(this,e,l,t,n,a,r):o||(o=this.programs[e]=i(this,e,l)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=h.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler};return a.isTop=!0,a._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials,r.decorators=n.decorators):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(r.decorators=r.merge(n.decorators,t.decorators)))},a._child=function(t,n,a,o){if(e.useBlockParams&&!a)throw new g["default"]("must pass block params");if(e.useDepths&&!o)throw new g["default"]("must pass parent depths");return i(r,t,e[t],n,0,a,o)},a}function i(e,t,n,a,r,i,o){function l(t){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],l=o;return o&&t!==o[0]&&(l=[t].concat(o)),n(e,t,e.helpers,e.partials,r.data||a,i&&[r.blockParams].concat(i),l)}return l=c(n,l,e,o,a,i),l.program=t,l.depth=o?o.length:0,l.blockParams=r||0,l}function o(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e}function l(e,t,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var a=void 0;if(n.fn&&n.fn!==s&&(n.data=v.createFrame(n.data),a=n.data["partial-block"]=n.fn,a.partials&&(n.partials=h.extend({},n.partials,a.partials))),void 0===e&&a&&(e=a),void 0===e)throw new g["default"]("The partial "+n.name+" could not be found");return e instanceof Function?e(t,n):void 0}function s(){return""}function u(e,t){return t&&"root"in t||(t=t?v.createFrame(t):{},t.root=e),t}function c(e,t,n,a,r,i){if(e.decorator){var o={};t=e.decorator(t,o,n,a&&a[0],r,i,a),h.extend(t,o)}return t}var d=n(1)["default"],f=n(2)["default"];t.__esModule=!0,t.checkRevision=a,t.template=r,t.wrapProgram=i,t.resolvePartial=o,t.invokePartial=l,t.noop=s;var p=n(4),h=d(p),m=n(5),g=f(m),v=n(3)},function(e,t){(function(n){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof n?n:window,a=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=a),e}},e.exports=t["default"]}).call(t,function(){return this}())}])}),function(e){"function"==typeof define&&define.amd?define(["../widgets/datepicker"],e):e(jQuery.datepicker)}(function(e){return e.regional.kk={closeText:"Жабу",prevText:"&#x3C;Алдыңғы",nextText:"Келесі&#x3E;",currentText:"Бүгін",monthNames:["Қаңтар","Ақпан","Наурыз","Сәуір","Мамыр","Маусым","Шілде","Тамыз","Қыркүйек","Қазан","Қараша","Желтоқсан"],monthNamesShort:["Қаң","Ақп","Нау","Сәу","Мам","Мау","Шіл","Там","Қыр","Қаз","Қар","Жел"],dayNames:["Жексенбі","Дүйсенбі","Сейсенбі","Сәрсенбі","Бейсенбі","Жұма","Сенбі"],dayNamesShort:["жкс","дсн","ссн","срс","бсн","жма","снб"],dayNamesMin:["Жк","Дс","Сс","Ср","Бс","Жм","Сн"],weekHeader:"Не",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.setDefaults(e.regional.kk),e.regional.kk}),function(e){"function"==typeof define&&define.amd?define(["../widgets/datepicker"],e):e(jQuery.datepicker)}(function(e){return e.regional.ru={closeText:"Закрыть",prevText:"&#x3C;Пред",nextText:"След&#x3E;",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Нед",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.setDefaults(e.regional.ru),e.regional.ru});var nb={APP_NAME:location.hostname,MODULE:location.pathname.split("/")[1],LANG:function(){var e,t=document.cookie.match("(lang)=(.*?)($|;|,(?! ))");return t&&(e=t[2]),e="KAZ"===e?"kk":"ENG"===e?"en":"ru"}(),debug:!1,api:{translations:"p?id=common-captions",upload:"UploadFile"},options:{dateFormat:"yy-mm-dd",sideTreeStorageName:location.pathname.split("/")[1]+"-side-tree-toggle",searchReferStorageName:location.pathname.split("/")[1]+"-search_refer"},translations:{yes:"Да",no:"Нет",ok:"Ok",cancel:"Отмена",select:"Выбрать",dialog_no_selected_value:"Вы не сделали выбор"}},nbApp={};nb.ajax=function(e){return $.ajax(e)},nb.getText=function(e,t){return this.translations[e]?this.translations[e]:void 0!==t?t:e},nb.fetchTranslations=function(){return $.ajax({type:"get",dataType:"json",url:nb.api.translations,success:function(e){for(var t in e.captions)nb.translations[t]=e.captions[t]}})},nb.getForm=function(e){if(!e)return e;if("string"==typeof e&&document[e]&&"FORM"===document[e].nodeName)return document[e];var t=$(e).parents("form");return t.length&&(e=t.get(0)),e.form||e},nb.uiBlock=function(){var e=$("#nb-block-ui");0===e.length&&(e=$('<div id="nb-block-ui" style="background:rgba(0,0,0,0.1);cursor:wait;position:fixed;top:0;left:0;bottom:0;right:0;z-index:999;"/>'),e.appendTo("body")),e.css("display","block")},nb.uiUnblock=function(){$("#nb-block-ui").css("display","none")},nb.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)},nb.template=function(e,t){return nb.templates[e].call(this,t)},nb.createElement=function(e,t,n){var a,r=document.createElement(e);for(a in t)r.setAttribute(a,t[a]);return r.innerHTML=n,r},$(document).ajaxError(function(e,t,n,a){if(!t.responseJSON){var r,i=t.responseText&&t.responseText.indexOf("<body>");r=i>-1?t.responseText.substring(i,t.responseText.indexOf("</body>")):t.responseText,r?nb.dialog.error({message:r,height:400,width:600}):nb.notify({type:"error",message:a})}}),$(document).ready(function(){var e=localStorage.getItem(nb.options.sideTreeStorageName),t=[];null!=e?t=e.split(","):localStorage.setItem(nb.options.sideTreeStorageName,""),$("[data-nav]",".aside").each(function(){-1!=t.indexOf($(this).data("nav"))&&$(this).removeClass("side-tree-collapsed")}),$(":checkbox").bind("click",function(){var e=$(this);if(!e.data("toggle"))return!0;var t=this.name||e.data("toggle"),n=$("[name="+t+"]:checkbox:visible:not([disabled])");e.is(":checked")?n.each(function(){this.checked=!0}):n.each(function(){this.checked=!1})}),$("[data-role=side-tree-toggle]").click(function(e){e.preventDefault(),e.stopPropagation();var t=$(this).closest(".side-tree-collapsible");t.toggleClass("side-tree-collapsed");var n=nb.options.sideTreeStorageName,a=t.data("nav"),r=localStorage.getItem(n),i=r.split(",");if(t.hasClass("side-tree-collapsed")){var o=i.indexOf(a);o>-1&&i.splice(o,1),localStorage.setItem(n,i.join(","))}else i.push(a),localStorage.setItem(n,i.join(","))}),$(document).on("click","[data-toggle=panel]",function(){var e,t=$(this).data("target");e=t?$(t):$(this).parents(".panel"),e.toggleClass("open")}),$(document).on("click","[data-toggle=side-nav]",function(e){e.preventDefault(),$("body").toggleClass("side-nav-toggle")}),$("#content-overlay").length&&($("#content-overlay").mousedown(function(e){e.preventDefault(),$("body").removeClass("side-nav-toggle search-open"),$(".navbar-search input.q").length&&$(".navbar-search input.q")[0].blur()}),$("#content-overlay")[0].addEventListener("touchstart",function(e){e.preventDefault(),$("body").removeClass("side-nav-toggle search-open"),$(".navbar-search input.q").length&&$(".navbar-search input.q")[0].blur()},!1)),$(".navbar-search input.q").on("focus",function(){$("body").addClass("search-open")}),$(".navbar-search input.q").on("blur",function(){$("body").removeClass("search-open")}),$(document).on("dblclick","[data-role=dialog-list-item]",function(){return nb.dialog.execute(this)}),$(window).resize(function(){window.innerWidth<=1024||nb.isMobile()?$("body").addClass("phone"):$("body").removeClass("phone")}),(nb.isMobile()||window.innerWidth<=1024)&&$("body").addClass("phone"),setTimeout(function(){$("body").removeClass("no_transition")},250)}),nb.dialog={_props:{title:nb.APP_NAME},info:function(e){return e.className="dialog-info",e.width=e.width||360,e.height=e.height||210,e.buttons=e.buttons||{Ok:function(){$(this).dialog("close")}},this.show(e)},warn:function(e){return e.className="dialog-warn",e.width=e.width||360,e.height=e.height||210,e.buttons=e.buttons||{Ok:function(){$(this).dialog("close")}},this.show(e)},error:function(e){return e.className="dialog-error",e.width=e.width||360,e.height=e.height||210,e.buttons=e.buttons||{Ok:function(){$(this).dialog("close")}},this.show(e)},execute:function(e){var t=$(e).parents("[role=dialog]"),n=$("[data-role=nb-dialog]",t);n[0].dialogOptions.onExecute(arguments)},resize:function(e){var t=$(e[0]).parents("[role=dialog]");if("none"!==t.css("display")){for(var n,a,r=$(".ui-dialog-titlebar",t[0]).outerHeight(),i=$(".ui-dialog-buttonpane",t[0]).outerHeight(),o=$(".dialog-filter",t[0]).outerHeight(),l=r+i+o,s=window.innerHeight,u=$(".nb-dialog-container",t[0]).get(0),c=u.offsetTop,d=0;d<u.children.length;d++)c+=u.children[d].clientHeight+u.children[d].offsetTop;600>s&&c>300?(n=window.scrollY+1,a=s-3):(a=s>800&&c>600?s/1.2:(c>60?c:60)+l,n=(s-a)/2,0>n?(n=window.scrollY+1,a=s-3):n+=window.scrollY);var f=(window.innerWidth-t.outerWidth())/2;t.css({height:a+"px",top:n+"px",left:f+"px"}),$(u).css({height:t[0].clientHeight-l+"px",maxHeight:"none"})}},load:function(e,t,n){return $.ajax({url:e,dataType:n.dataType||"html",beforeSend:function(){t.addClass("loading")},success:function(e,a,r){"error"===a?t.html('<div class="alert alert-danger">'+a+"</div>"):("json"===n.dataType?t.html(nb.template.call(n,n.templateId,{dialogId:n.id,url:n.href,fields:n.fields,isMulti:n.isMulti===!0,meta:e.objects[0].meta,type:e.objects[0].type,models:e.objects[0].list})):t.html(e),null!==n.onLoad&&n.onLoad(e,a,r),n.filter!==!1&&new nb.dialog.Filter(t,n.dialogFilterListItem,13));try{window.dispatchEvent(new Event("resize"))}catch(i){}nb.debug===!0&&console.log("nb.dialog : load callback",r)},error:function(e,n,a){"error"===n&&t.html('<div class="alert alert-danger">'+n+"</div>");try{window.dispatchEvent(new Event("resize"))}catch(r){}nb.debug===!0&&console.log("nb.dialog : load error",a)},complete:function(){t.removeClass("loading")}})},show:function(e){var t,n=this;if(e.id=e.id||null,e.title=e.title||this._props.title,e.href=e.href||null,e.className=e.className||"",e.message=e.message||null,e.filter=e.filter,e.dialogFilterListItem=e.dialogFilterListItem||"li",e.buttons=e.buttons||null,e.dialogClass="nb-dialog "+(e.dialogClass?e.dialogClass:""),e.errorMessage=e.errorMessage||nb.getText("dialog_no_selected_value"),e.templateId=e.templateId||"dialog-list",e.onLoad=e.onLoad||null,e.onExecute=e.onExecute||function(){nb.setFormValues(t)&&t.dialog("close")},e.autoOpen=!0,e.modal===!1?e.modal=!1:e.modal=!0,e.width=e.width||500,e.position={top:window.scrollY},e.resizable=!1,e.draggable=!1,!e.id&&e.href){if(e.id="dlg_"+e.href.replace(/[^a-z0-9]/gi,""),t=$("#"+e.id),t[0])return t.dialog("isOpen")===!0?void 0:(t.dialog("open"),void n.resize(t))}else if(e.id&&(t=$("#"+e.id),t[0]))return t.dialog("isOpen")===!0?void 0:(t.dialog("open"),void n.resize(t));var a;a=e.href?$('<div data-role="nb-dialog" id="'+e.id+'" class="nb-dialog-container loading '+e.className+'"></div>'):e.id?$('<div data-role="nb-dialog" id="'+e.id+'" class="nb-dialog-container '+e.className+'">'+e.message+"</div>"):$('<div data-role="nb-dialog" class="nb-dialog-container '+e.className+'">'+e.message+"</div>"),a[0].dialogOptions=e,e.href?(n.load(e.href,a,e),t=a.dialog(e),a.on("click","a",function(t){t.preventDefault(),n.load(this.href,a,e)})):t=a.dialog(e),e.id||(e.close=e.close||function(){t.dialog("destroy"),t.remove(),$(t.resizeEvent).off()});var r;return t.resizeEvent=$(window).on("resize",function(){clearTimeout(r),r=setTimeout(function(){n.resize(t)},100)}),t}},nb.dialog.Filter=function(e,t,n,a){function r(){if(0===$(".dialog-filter input[data-role=search]",h).length){o=$(f,p[0]);var e=$(".toggle-response",p[0]).length>0;o.length<s&&!e||(0===$(".dialog-filter",h).length&&p.before("<div class=dialog-filter></div>"),$(".dialog-filter",h).append('<input type=text name=keyword data-role=search placeholder="'+nb.getText("filter","Фильтр")+'" />'),l=$(".dialog-filter input[data-role=search]",h),l.on("keyup",function(e){try{if(clearTimeout(d),13===e.keyCode)return}catch(t){console.log(t)}d=setTimeout(function(){o=$(f,p[0]),i(e.target.value)},c)}))}}function i(e){try{if(e.length>=u){var t=0,n=new RegExp(e,"gim");o.attr("style",""),o.each(function(a,r){n.test(r.textContent)||-1!=r.textContent.indexOf(e)||0===$(":checked",r).length&&(r.style.display="none",t++)}),o.length>t?l.attr("title","By keyword ["+e+"] filtered "+(o.length-t)):l.attr("title",nb.getText("filter_no_results","Не найдено"))}else o.attr("style",""),l.attr("title","")}catch(a){console.log(a)}}var o,l=null,s=n||13,u=a||2,c=300,d=null,f=t||".item",p=e,h=p.parents("[role=dialog]");r()},nb.windowOpen=function(e,t,n){var a,r=800,i=600,o=(window.innerHeight-i)/2,l=(window.innerWidth-r)/2;0>o&&(o=0),0>l&&(l=0),a="top="+o+",left="+l,a+=",height="+i+",width="+r+",resizable=yes,scrollbars=yes,status=no";var s="window-"+(t||e.hashCode()),u=window.open("",s,a);if(("about:blank"===u.document.URL||""===u.document.URL)&&(u=window.open(e,s,a),n&&n.onclose))var c=setInterval(function(){u.closed&&(clearInterval(c),n.onclose())},1e3);u.focus()},nb.submitForm=function(e,t){if(!nb.validateForm(e)){var n=$.Deferred();return n.reject(!1)}t=t||{};var a=nb.notify({message:t.notify||nb.getText("wait_while_document_save","Пожалуйста ждите... идет сохранение документа"),type:"process"}).show(),r={cache:!1,type:"POST",dataType:"json",url:e.action||e.baseURI,data:$(e).serialize(),beforeSend:function(){nb.uiBlock(),$(".required, .has-error",e).removeClass("required has-error"),$(".error-message",e).remove()},success:function(e){return a.set({text:e.captions.type,type:"success"}),e.redirectURL&&("_back"===e.redirectURL?history.back():window.location.href=e.redirectURL),e},error:function(t){var n=t.responseJSON,r={type:"error"};return"VALIDATION_ERROR"===n.type?(r.text=n.captions.type,nb.validateForm(e,n.validation)):"SERVER_ERROR"===n.type?r.text=n.captions.type:r.text="Error: "+t.status,a.set(r),t},complete:function(){nb.uiUnblock(),a.remove(2e3)}};return nb.ajax(r)},nb.validateForm=function(e,t){var n=!0;if(t&&t.errors){var a,r=t.errors;for(var i in r){a=r[i],0==i&&$("[name="+a.field+"]").focus(),$("[name="+a.field+"]",e).attr("required","required").addClass("required");var o=$("[data-input="+a.field+"]",e).addClass("required"),l=$("<div class=error-message>"+a.message+"</div>");o.length?(o.after(l),o.parent().addClass("has-error")):$("[name="+a.field+"]",e).parent().addClass("has-error").append(l)}}return $("[required]:invalid",e).length&&($("[required]:invalid",e).first().focus(),n=!1),n},nb.setFormValues=function(e){function t(){var e=l.length>1,t={};return l.each(function(){var a,r,l,s,u,c=this.value;for(a in o){if(r=$("[data-id="+c+"][name="+o[a][0]+"]",n),l=$("[name="+a+"]",i),s=r.val(),u=r.data("text"),u||(u=s),e)t[a]!==!0&&l.remove(),l=$('<input type="hidden" name="'+a+'" />'),l.appendTo(i);else{var d=$("[type=hidden][name="+a+"]",i);d.length>1&&(d.remove(),l=$('<input type="hidden" name="'+a+'" />'),l.appendTo(i))}0===l.length&&(l=$('<input type="hidden" name="'+a+'" />'),l.appendTo(i)),l.val(s),e?t[a]!==!0?(t[a]=!0,$("[data-input="+a.replace("id","")+"]",i).html("<li>"+u+"</li>")):$("[data-input="+a.replace("id","")+"]",i).append("<li>"+u+"</li>"):$("[data-input="+a.replace("id","")+"]",i).html(u)}}),!0}var n=$(e).parents("[role=dialog]"),a=$("[data-role=nb-dialog]",n),r=a[0].dialogOptions,i=nb.getForm(r.targetForm),o=r.fields;if(!i)return nb.dialog.warn({title:"Error",message:"Error nb.setFormValues > form is not found: "+i}),!1;var l=$("[data-type=select]:checked",n);return l.length?t():(r.effect&&(n.stop(),n.effect(r.effect,{times:2},300)),0===$(".no-selected-value",n[0]).length&&!function(){var e=$("<div class=no-selected-value>"+r.errorMessage+"</div>");a.after(e),setTimeout(function(){e.fadeOut({always:function(){e.remove()}})},500)}(),!1)},nb.clearFormFields=function(e,t){var n=nb.getForm(t);for(var a in e)$("[name="+e[a]+"]",n).val(""),$("[data-input="+e[a]+"]",n).html("")},$(document).ready(function(){$("form[name]").each(function(){$("input, select, textarea",this).on("change",function(){this.validity&&this.validity.valid&&($(this).parent().removeClass("has-error"),$(this).removeClass("has-error"),$(".error-message",$(this).parent()).remove())})})}),Handlebars.registerHelper("mapValue",function(e,t){return e[t]}),Handlebars.registerHelper("unescapeXml",function(e){return e.replace("&amp;","&")}),Handlebars.registerPartial("pagination",function(e){return nb.html.pagination(e)}),nb.html={},nb.html.pagination=function(e){var t="",n=7,a=e.meta.totalPages,r=e.meta.page,i=e.url;if(a>1){var o=parseInt(n/2,10),l=r-o,s=r+o;o>=l?l=1:r==a&&(l=a-n),s>a-o?s=a:1==r&&(s=n+1),n+o>=a&&(l=1,s=a);try{t="<div class=pagination>",t+="<span class=text-muted>"+e.models.length+"/"+e.meta.count+" </span>",l>1&&(t+='<a href="'+i+'&page=1">1</a>',t+="<span>...</span>");for(var u=l;s>=u;u++)t+=u==r?'<a class="page-active" href="'+i+"&page="+u+'">'+u+"</a>":'<a href="'+i+"&page="+u+'">'+u+"</a>";a>s&&(t+="<span>...</span>",t+='<a href="'+i+"&page="+a+'">'+a+"</a>"),t+="</div>"}catch(c){alert(c)}}return t},jQuery.fn.numericField=function(){var e=/(\d)(?=(\d\d\d)+([^\d]|$))/g;return this.each(function(){var t,n=jQuery(this);n.each(function(){t=$(this).val(),$(this).val($(this).val().replace(e,"$1 ")),$(this).attr("readonly")||$(this).keyup(function(t){if(-1!=[37,38,39,40].indexOf(t.keyCode))return!0;var n=$(this).val().replace(/[^0-9,\.]/g,"").replace(e,"$1 ");$(this).val(n)}).keydown(function(e){return!0})})})},nb.notify=function(e){var t=$("#nb-notify-wrapper");t.length||(t=$("<div id=nb-notify-wrapper class=nb-notify></div>").appendTo("body"));var n=$('<div class="nb-notify-entry-'+(e.type||"info")+'">'+e.message+"</div>").appendTo(t);return{show:function(e,t){return n.css("display","block"),e?void this.remove(e,t):this},hide:function(){return n.css("display","none"),this},set:function(e){for(var t in e)"text"===t?n.text(e[t]):"type"===t&&n.attr("class","nb-notify-entry-"+e[t]);return this},remove:function(e,t){null!==n&&(e&&("click"===e||e>0)?"click"===e?(n.addClass("dismiss-click"),n.on("click",function(){n.remove(),n=null})):setTimeout(function(){n.remove(),n=null,"function"==typeof t&&t()},e):(n.remove(),n=null,"function"==typeof t&&t()))}}},nb.xhrDelete=function(e){return $.ajax({type:"DELETE",dataType:"json",url:e})},nb.xhrDownload=function(e){e.method=e.method||"POST",e.url=e.url||location.href,e.data=e.data||"",e.blockUi=e.blockUi===!0;var t;e.notify&&(t=nb.notify({message:e.notify}));var n=new XMLHttpRequest;n.open(e.method,e.url+"&"+e.data,!0),n.responseType="arraybuffer",n.onload=function(a){e.blockUi&&nb.uiUnblock(),t&&t.remove();var r=n.response,i="",o=n.getResponseHeader("Content-Disposition");if(o&&-1!==o.indexOf("attachment")){var l=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,s=l.exec(o);null!=s&&s[1]&&(i=s[1].replace(/['"]/g,"").replace("utf-8",""))}var u=n.getResponseHeader("Content-Type"),c=new Blob([r],{type:u});if("undefined"!=typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(c,i);else{var d=window.URL||window.webkitURL,f=d.createObjectURL(c);if(i){var p=document.createElement("a");"undefined"==typeof p.download?window.location=f:(p.href=f,p.download=i,document.body.appendChild(p),p.click())}else window.location=f;setTimeout(function(){d.revokeObjectURL(f)},100)}"function"==typeof e.success&&e.success()},n.send(null),t&&t.show(),e.blockUi&&nb.uiBlock()},nb.getSelectOptions=function(e){var t=e,n=[],a=!1,r={},i=function(e){var n=[],a={},r={},i={};if(e.objects.length){a=e.objects[0].meta,r=e.objects[0].list;for(var o in r){if(i={id:r[o].id,text:r[o].name},t.fields)for(var l in t.fields)i[t.fields[l]]=r[o][t.fields[l]];n.push(i)}}return{meta:a,items:n}},o=function(e,t){if(!t||!t.trim().length)return e;var n=t.trim().toLowerCase(),a=[];for(var r in e.items)e.items[r].text.toLowerCase().indexOf(n)>-1&&a.push(e.items[r]);return{meta:e.meta,items:a}};return{allowClear:!0,minimumInputLength:0,minimumResultsForSearch:t.minimumResultsForSearch||20,placeholder:t.placeholder||"",templateResult:t.templateResult,language:nb.LANG,ajax:{url:t.url,dataType:"json",delay:0,data:function(e){var n={page:e.page,keyword:e.term};for(var a in t.data)n[t.data[a]]=this[0].form[t.data[a]].value;return n},processResults:function(e,t){var n=e;return t.page=t.page||1,r=e.meta,a=1==r.totalPages,{results:n.items,pagination:{more:t.page<r.totalPages}}},transport:function(e,a,l){var s,u=e.url,c=t.cache&&1==r.totalPages;if(c&&(s=n[u]),s&&s.items.length){var d=o(s,e.data.keyword);return a(d)}var f=$.ajax(e);return f.then(function(e){var t=i(e);return n[u]=t,a(t)}),f.fail(l),f},cache:!0}}},$(document).ready(function(){$("select[name]:not(.native)").each(function(){var e=nbApp.selectOptions&&nbApp.selectOptions[this.name];if(e){var t=$(this).select2(nb.getSelectOptions(e));t.on("select2:unselecting",function(t){$(this).data("unselecting",!0),"function"==typeof e.onSelect&&e.onSelect(t)}).on("select2:opening",function(e){
$(this).data("unselecting")&&($(this).removeData("unselecting"),e.preventDefault())}),"function"==typeof e.onSelect&&t.on("select2:select",function(t){e.onSelect&&e.onSelect(t)})}else nb.isMobile()?this.multiple&&$(this).select2({minimumResultsForSearch:20}).on("select2:unselecting",function(){$(this).data("unselecting",!0)}).on("select2:opening",function(e){$(this).data("unselecting")&&($(this).removeData("unselecting"),e.preventDefault())}):$(this).select2({minimumResultsForSearch:20}).on("select2:unselecting",function(){$(this).data("unselecting",!0)}).on("select2:opening",function(e){$(this).data("unselecting")&&($(this).removeData("unselecting"),e.preventDefault())})}),$("select[name]").on("change",function(){$(this).val()?$("[data-role=dummy-select][name="+this.name+"]",$(this).parent()).remove():$("<input type=hidden data-role=dummy-select name="+this.name+' value="">').appendTo($(this).parent())})}),nb.upload=function(e){var t=e.name,n=new FormData(e.form),a=$(nb.template("attachments",{files:[{name:e.files[0].name,path:""}]})),r=a.find(".upload-progress");return $.ajax({url:nb.api.upload+"?time="+(new Date).getTime(),method:"POST",cache:!1,contentType:!1,processData:!1,data:n,xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(e){nb.uploadProgress(e,r)},!1),e},beforeSend:function(){$("[data-upload-files="+t+"]").prepend(a)},success:function(e,t){return a.removeClass("uploading"),a.find(".file-name").addClass("blink-anim"),a.find("[name=fileid]").removeAttr("disabled"),$(".btn-remove-file",a).click(function(){a.remove()}),e},error:function(e){return a.addClass("error"),e},complete:function(){e.form.reset(),$("#progress_"+t).val(0)}})},nb.uploadProgress=function(e,t){e.lengthComputable&&t.css("width",e.loaded/e.total*100+"%")},$(document).ready(function(){var e=(new Date).getTime();$("[data-upload]").each(function(){var t=this,n=$(this).data("upload");if(this.form.fsid&&this.form.fsid.value&&(e=this.form.fsid.value),0===$("[type=file][name="+n+"]").length){this.form.fsid?this.form.fsid.value=e:$('<input type=hidden name=fsid value="'+e+'"/>').appendTo(this.form);var a=$('<form class=hidden><input type=file name="'+n+'" /><input type=hidden name=fsid value="'+e+'"/></form>').appendTo("body"),r=a.find("input[type=file]");r.on("change",function(){$(t).attr("disabled",!0),nb.upload(r[0]).always(function(){$(t).attr("disabled",!1)}),location.search.match("&fsid=")||history.replaceState(null,null,location.href+"&fsid="+e)}),$(this).click(function(){r.click()})}$(".attachments-file","[data-upload-files="+n+"]").each(function(){var e=this,t=$("a[data-file]",e).attr("href");$(".btn-remove-file",e).on("click",function(){nb.xhrDelete(t).then(function(){e.remove()})})})})}),nb.getSelectedEntityIDs=function(e){var t=$("input[name="+(e||"docid")+"]:checked");if(0===t.length)return[];var n=[];return t.each(function(){n.push(this.value)}),n},nb.setSearchReferToSessionStorage=function(){-1==location.href.indexOf("id=search")&&sessionStorage.setItem(nb.options.searchReferStorageName,location.href)},nb.resetSearchFromRefer=function(){var e=sessionStorage.getItem(nb.options.searchReferStorageName);e?(sessionStorage.removeItem(nb.options.searchReferStorageName),location.href=e):history.back()},$(document).ready(function(){$("form[name=ft-search]").on("submit",function(){return nb.setSearchReferToSessionStorage(),!0}),$("form[name=ft-search]").on("reset",function(){$("[type=search]",this).attr("value","").focus()}),$("[data-action=reset_search]").click(function(e){nb.resetSearchFromRefer()})}),this.nb=this.nb||{},this.nb.templates=this.nb.templates||{},this.nb.templates.attachments=Handlebars.template({1:function(e,t,n,a,r,i){var o,l=e.lambda,s=e.escapeExpression;return'    <div class="attachments-file uploading">\r\n        <span class="file-name" data-file="'+s(l(null!=(o=i[0][0])?o.name:o,t))+'">\r\n            '+s(l(null!=(o=i[0][0])?o.name:o,t))+'\r\n            <div class="upload-progress"></div>\r\n        </span>\r\n        <span class="btn btn-sm btn-link btn-remove-file">\r\n            <i class="fa fa-times"></i>\r\n        </span>\r\n        <input type="hidden" name="fileid" value="'+s(l(null!=(o=i[0][0])?o.name:o,t))+'" data-path="'+s(l(null!=(o=i[0][0])?o.path:o,t))+'" />\r\n    </div>\r\n'},3:function(e,t,n,a,r){return'    <div class="blink-anim">files empty</div>\r\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,r,i){var o;return null!=(o=n.each.call(null!=t?t:{},null!=t?t.files:t,{name:"each",hash:{},fn:e.program(1,r,1,i),inverse:e.program(3,r,0,i),data:r,blockParams:i}))?o:""},useData:!0,useBlockParams:!0}),this.nb.templates["dialog-list"]=Handlebars.template({1:function(e,t,n,a,r,i,o){var l,s=null!=t?t:{};return'    <li class=nb-dialog-list-it>\r\n        <label data-role="dialog-list-item">\r\n'+(null!=(l=n["if"].call(s,null!=o[1]?o[1].isMulti:o[1],{name:"if",hash:{},fn:e.program(2,r,0,i,o),inverse:e.program(4,r,0,i,o),data:r,blockParams:i}))?l:"")+"            <span>"+e.escapeExpression(e.lambda(null!=(l=i[0][0])?l.name:l,t))+"</span>\r\n"+(null!=(l=n.each.call(s,null!=o[1]?o[1].fields:o[1],{name:"each",hash:{},fn:e.program(6,r,1,i,o),inverse:e.noop,data:r,blockParams:i}))?l:"")+"        </label>\r\n    </li>\r\n"},2:function(e,t,n,a,r,i,o){var l,s=e.lambda,u=e.escapeExpression;return'                <input data-type="select" type="checkbox" name="select_'+u(s(null!=o[1]?o[1].dialogId:o[1],t))+'" value="'+u(s(null!=(l=i[1][0])?l.id:l,t))+'"/>\r\n'},4:function(e,t,n,a,r,i,o){var l,s=e.lambda,u=e.escapeExpression;return'                <input data-type="select" type="radio" name="select_'+u(s(null!=o[1]?o[1].dialogId:o[1],t))+'" value="'+u(s(null!=(l=i[1][0])?l.id:l,t))+'"/>\r\n'},6:function(e,t,n,a,r,i){var o;return null!=(o=n["if"].call(null!=t?t:{},null!=(o=i[0][0])?o[1]:o,{name:"if",hash:{},fn:e.program(7,r,0,i),inverse:e.program(9,r,0,i),data:r,blockParams:i}))?o:""},7:function(e,t,n,a,r,i){var o,l=e.lambda,s=e.escapeExpression,u=null!=t?t:{},c=n.helperMissing;return'                    <input data-id="'+s(l(null!=(o=i[2][0])?o.id:o,t))+'" name="'+s(l(null!=(o=i[1][0])?o[0]:o,t))+'" value="'+s((n.mapValue||t&&t.mapValue||c).call(u,i[2][0],null!=(o=i[1][0])?o[0]:o,{name:"mapValue",hash:{},data:r,blockParams:i}))+'" data-text="'+s((n.mapValue||t&&t.mapValue||c).call(u,i[2][0],null!=(o=i[1][0])?o[1]:o,{name:"mapValue",hash:{},data:r,blockParams:i}))+'" type="hidden"/>\r\n'},9:function(e,t,n,a,r,i){var o,l=e.lambda,s=e.escapeExpression;return'                    <input data-id="'+s(l(null!=(o=i[2][0])?o.id:o,t))+'" name="'+s(l(null!=(o=i[1][0])?o[0]:o,t))+'" value="'+s((n.mapValue||t&&t.mapValue||n.helperMissing).call(null!=t?t:{},i[2][0],null!=(o=i[1][0])?o[0]:o,{name:"mapValue",hash:{},data:r,blockParams:i}))+'" type="hidden"/>\r\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,a,r,i,o){var l;return(null!=(l=e.invokePartial(a.pagination,t,{name:"pagination",data:r,blockParams:i,helpers:n,partials:a,decorators:e.decorators}))?l:"")+"<ul class=nb-dialog-list>\r\n"+(null!=(l=n.each.call(null!=t?t:{},null!=t?t.models:t,{name:"each",hash:{},fn:e.program(1,r,1,i,o),inverse:e.noop,data:r,blockParams:i}))?l:"")+"</ul>\r\n"},usePartial:!0,useData:!0,useDepths:!0,useBlockParams:!0});